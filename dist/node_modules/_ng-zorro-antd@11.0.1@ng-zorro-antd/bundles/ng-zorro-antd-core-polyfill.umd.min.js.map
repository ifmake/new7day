{"version":3,"sources":["../../components/core/polyfill/request-animation.ts"],"names":["availablePrefixes","reqAnimFrame","window","requestAnimationFrame","bind","lastTime","prefix","filter","key","callback","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","getRequestAnimationFrame","cancelAnimationFrame","call","this","clearTimeout"],"mappings":"oYAOA,IAAMA,EAAoB,CAAC,MAAO,KAAM,cA8C3BC,EA/Bb,WACE,GAAsB,oBAAXC,OACT,OAAO,WAAM,OAAA,GAEf,GAAIA,OAAOC,sBAET,OAAOD,OAAOC,sBAAsBC,KAAKF,QAG3C,IArBIG,EAqBEC,EAASN,EAAkBO,QAAO,SAAAC,GAAO,OAAGA,EAAG,0BAA2BN,UAAQ,GAExF,OAAOI,EAAUJ,OAAwBI,EAAM,0BAvB3CD,EAAW,EACR,SAAUI,GACf,IAAMC,GAAW,IAAIC,MAAOC,UACtBC,EAAaC,KAAKC,IAAI,EAAG,IAAML,EAAWL,IAC1CW,EAAKC,YAAW,WACpBR,EAASC,EAAWG,KACnBA,GAEH,OADAR,EAAWK,EAAWG,EACfG,IAmCiBE,0CAlBgBF,GAC1C,GAAsB,oBAAXd,OACT,OAAO,KAET,GAAIA,OAAOiB,qBACT,OAAOjB,OAAOiB,qBAAqBH,GAErC,IAAMV,EAASN,EAAkBO,QAC/B,SAAAC,GAAO,OAAGA,EAAG,yBAA0BN,QAAaM,EAAG,gCAAiCN,UACxF,GAEF,OAAOI,GACDJ,OAAwBI,EAAM,yBAA4BJ,OAAwBI,EAAM,gCAEvFc,KAAKC,KAAML,GACdM,aAAaN","sourcesContent":["/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nimport { NzSafeAny } from 'ng-zorro-antd/core/types';\n\n// tslint:disable: typedef no-invalid-this\nconst availablePrefixes = ['moz', 'ms', 'webkit'];\n\nfunction requestAnimationFramePolyfill(): typeof requestAnimationFrame {\n  let lastTime = 0;\n  return function (callback: FrameRequestCallback): number {\n    const currTime = new Date().getTime();\n    const timeToCall = Math.max(0, 16 - (currTime - lastTime));\n    const id = setTimeout(() => {\n      callback(currTime + timeToCall);\n    }, timeToCall);\n    lastTime = currTime + timeToCall;\n    return id;\n  };\n}\n\nfunction getRequestAnimationFrame(): typeof requestAnimationFrame {\n  if (typeof window === 'undefined') {\n    return () => 0;\n  }\n  if (window.requestAnimationFrame) {\n    // https://github.com/vuejs/vue/issues/4465\n    return window.requestAnimationFrame.bind(window);\n  }\n\n  const prefix = availablePrefixes.filter(key => `${key}RequestAnimationFrame` in window)[0];\n\n  return prefix ? (window as NzSafeAny)[`${prefix}RequestAnimationFrame`] : requestAnimationFramePolyfill();\n}\nexport function cancelRequestAnimationFrame(id: number): NzSafeAny {\n  if (typeof window === 'undefined') {\n    return null;\n  }\n  if (window.cancelAnimationFrame) {\n    return window.cancelAnimationFrame(id);\n  }\n  const prefix = availablePrefixes.filter(\n    key => `${key}CancelAnimationFrame` in window || `${key}CancelRequestAnimationFrame` in window\n  )[0];\n\n  return prefix\n    ? ((window as NzSafeAny)[`${prefix}CancelAnimationFrame`] || (window as NzSafeAny)[`${prefix}CancelRequestAnimationFrame`])\n        // @ts-ignore\n        .call(this, id)\n    : clearTimeout(id);\n}\n\nexport const reqAnimFrame = getRequestAnimationFrame();\n"]}