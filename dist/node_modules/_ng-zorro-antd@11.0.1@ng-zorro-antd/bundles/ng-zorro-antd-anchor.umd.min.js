!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/cdk/platform"),require("@angular/core"),require("@angular/common"),require("ng-zorro-antd/core/config"),require("ng-zorro-antd/core/services"),require("ng-zorro-antd/core/util"),require("rxjs"),require("rxjs/operators"),require("@angular/cdk/bidi"),require("ng-zorro-antd/affix")):"function"==typeof define&&define.amd?define("ng-zorro-antd/anchor",["exports","@angular/cdk/platform","@angular/core","@angular/common","ng-zorro-antd/core/config","ng-zorro-antd/core/services","ng-zorro-antd/core/util","rxjs","rxjs/operators","@angular/cdk/bidi","ng-zorro-antd/affix"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self)["ng-zorro-antd"]=t["ng-zorro-antd"]||{},t["ng-zorro-antd"].anchor={}),t.ng.cdk.platform,t.ng.core,t.ng.common,t["ng-zorro-antd"].core.config,t["ng-zorro-antd"].core.services,t["ng-zorro-antd"].core.util,t.rxjs,t.rxjs.operators,t.ng.cdk.bidi,t["ng-zorro-antd"].affix)}(this,(function(t,e,n,i,o,r,s,a,l,c,p){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function h(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}function f(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}Object.create;Object.create;function u(t,e){if(!t||!t.getClientRects().length)return 0;var n=t.getBoundingClientRect();if(n.width||n.height){if(e===window){var i=t.ownerDocument.documentElement;return n.top-i.clientTop}return n.top-e.getBoundingClientRect().top}return n.top}var d=/#([^#]+)$/,g=function(){function t(t,e,i,o,r,s,l){this.doc=t,this.nzConfigService=e,this.scrollSrv=i,this.cdr=o,this.platform=r,this.zone=s,this.renderer=l,this._nzModuleName="anchor",this.nzAffix=!0,this.nzShowInkInFixed=!1,this.nzBounds=5,this.nzOffsetTop=void 0,this.nzClick=new n.EventEmitter,this.nzScroll=new n.EventEmitter,this.visible=!1,this.wrapperStyle={"max-height":"100vh"},this.links=[],this.animating=!1,this.destroy$=new a.Subject,this.handleScrollTimeoutID=-1}return t.prototype.registerLink=function(t){this.links.push(t)},t.prototype.unregisterLink=function(t){this.links.splice(this.links.indexOf(t),1)},t.prototype.getContainer=function(){return this.container||window},t.prototype.ngAfterViewInit=function(){this.registerScrollEvent()},t.prototype.ngOnDestroy=function(){clearTimeout(this.handleScrollTimeoutID),this.destroy$.next(),this.destroy$.complete()},t.prototype.registerScrollEvent=function(){var t=this;this.platform.isBrowser&&(this.destroy$.next(),this.zone.runOutsideAngular((function(){a.fromEvent(t.getContainer(),"scroll").pipe(l.throttleTime(50),l.takeUntil(t.destroy$)).subscribe((function(){return t.handleScroll()}))})),this.handleScrollTimeoutID=setTimeout((function(){return t.handleScroll()})))},t.prototype.handleScroll=function(){var t=this;if("undefined"!=typeof document&&!this.animating){var e=[],n=(this.nzOffsetTop||0)+this.nzBounds;if(this.links.forEach((function(i){var o=d.exec(i.nzHref.toString());if(o){var r=t.doc.getElementById(o[1]);if(r){var s=u(r,t.getContainer());s<n&&e.push({top:s,comp:i})}}})),this.visible=!!e.length,this.visible){var i=e.reduce((function(t,e){return e.top>t.top?e:t}));this.handleActive(i.comp)}else this.clearActive(),this.cdr.detectChanges();this.setVisible()}},t.prototype.clearActive=function(){this.links.forEach((function(t){t.unsetActive()}))},t.prototype.handleActive=function(t){this.clearActive(),t.setActive();var e=t.getLinkTitleElement();this.ink.nativeElement.style.top=e.offsetTop+e.clientHeight/2-4.5+"px",this.visible=!0,this.setVisible(),this.nzScroll.emit(t)},t.prototype.setVisible=function(){var t=this.visible,e="visible";this.ink&&(t?this.renderer.addClass(this.ink.nativeElement,e):this.renderer.removeClass(this.ink.nativeElement,e))},t.prototype.handleScrollTo=function(t){var e=this,n=this.doc.querySelector(t.nzHref);if(n){this.animating=!0;var i=this.scrollSrv.getScroll(this.getContainer())+u(n,this.getContainer())-(this.nzOffsetTop||0);this.scrollSrv.scrollTo(this.getContainer(),i,{callback:function(){e.animating=!1,e.handleActive(t)}}),this.nzClick.emit(t.nzHref)}},t.prototype.ngOnChanges=function(t){var e=t.nzOffsetTop,n=t.nzContainer;if(e&&(this.wrapperStyle={"max-height":"calc(100vh - "+this.nzOffsetTop+"px)"}),n){var i=this.nzContainer;this.container="string"==typeof i?this.doc.querySelector(i):i,this.registerScrollEvent()}},t}();g.decorators=[{type:n.Component,args:[{selector:"nz-anchor",exportAs:"nzAnchor",preserveWhitespaces:!1,template:'\n    <nz-affix *ngIf="nzAffix; else content" [nzOffsetTop]="nzOffsetTop" [nzTarget]="container">\n      <ng-template [ngTemplateOutlet]="content"></ng-template>\n    </nz-affix>\n    <ng-template #content>\n      <div class="ant-anchor-wrapper" [ngStyle]="wrapperStyle">\n        <div class="ant-anchor" [ngClass]="{ fixed: !nzAffix && !nzShowInkInFixed }">\n          <div class="ant-anchor-ink">\n            <div class="ant-anchor-ink-ball" #ink></div>\n          </div>\n          <ng-content></ng-content>\n        </div>\n      </div>\n    </ng-template>\n  ',encapsulation:n.ViewEncapsulation.None,changeDetection:n.ChangeDetectionStrategy.OnPush}]}],g.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[i.DOCUMENT]}]},{type:o.NzConfigService},{type:r.NzScrollService},{type:n.ChangeDetectorRef},{type:e.Platform},{type:n.NgZone},{type:n.Renderer2}]},g.propDecorators={ink:[{type:n.ViewChild,args:["ink",{static:!1}]}],nzAffix:[{type:n.Input}],nzShowInkInFixed:[{type:n.Input}],nzBounds:[{type:n.Input}],nzOffsetTop:[{type:n.Input}],nzContainer:[{type:n.Input}],nzClick:[{type:n.Output}],nzScroll:[{type:n.Output}]},h([s.InputBoolean(),f("design:type",Object)],g.prototype,"nzAffix",void 0),h([o.WithConfig(),s.InputBoolean(),f("design:type",Boolean)],g.prototype,"nzShowInkInFixed",void 0),h([o.WithConfig(),s.InputNumber(),f("design:type",Number)],g.prototype,"nzBounds",void 0),h([s.InputNumber(void 0),o.WithConfig(),f("design:type",Number)],g.prototype,"nzOffsetTop",void 0);var m=function(){function t(t,e,n,i){this.elementRef=t,this.anchorComp=e,this.platform=n,this.renderer=i,this.nzHref="#",this.titleStr="",this.renderer.addClass(t.nativeElement,"ant-anchor-link")}return Object.defineProperty(t.prototype,"nzTitle",{set:function(t){t instanceof n.TemplateRef?(this.titleStr=null,this.titleTpl=t):this.titleStr=t},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.anchorComp.registerLink(this)},t.prototype.getLinkTitleElement=function(){return this.linkTitle.nativeElement},t.prototype.setActive=function(){this.renderer.addClass(this.elementRef.nativeElement,"ant-anchor-link-active")},t.prototype.unsetActive=function(){this.renderer.removeClass(this.elementRef.nativeElement,"ant-anchor-link-active")},t.prototype.goToClick=function(t){t.preventDefault(),t.stopPropagation(),this.platform.isBrowser&&this.anchorComp.handleScrollTo(this)},t.prototype.ngOnDestroy=function(){this.anchorComp.unregisterLink(this)},t}();m.decorators=[{type:n.Component,args:[{selector:"nz-link",exportAs:"nzLink",preserveWhitespaces:!1,template:'\n    <a #linkTitle (click)="goToClick($event)" href="{{ nzHref }}" class="ant-anchor-link-title" title="{{ titleStr }}">\n      <span *ngIf="titleStr; else titleTpl || nzTemplate">{{ titleStr }}</span>\n    </a>\n    <ng-content></ng-content>\n  ',encapsulation:n.ViewEncapsulation.None,changeDetection:n.ChangeDetectionStrategy.OnPush}]}],m.ctorParameters=function(){return[{type:n.ElementRef},{type:g},{type:e.Platform},{type:n.Renderer2}]},m.propDecorators={nzHref:[{type:n.Input}],nzTitle:[{type:n.Input}],nzTemplate:[{type:n.ContentChild,args:["nzTemplate",{static:!1}]}],linkTitle:[{type:n.ViewChild,args:["linkTitle"]}]};var y=function(){};y.decorators=[{type:n.NgModule,args:[{declarations:[g,m],exports:[g,m],imports:[c.BidiModule,i.CommonModule,p.NzAffixModule,e.PlatformModule]}]}],t.NzAnchorComponent=g,t.NzAnchorLinkComponent=m,t.NzAnchorModule=y,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-zorro-antd-anchor.umd.min.js.map